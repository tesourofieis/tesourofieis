---
import {getCollection} from "astro:content";
import { LinkCard, CardGrid } from '@astrojs/starlight/components';


const { slug } = Astro.params;

const allPages = await getCollection('docs');
let searchPages = allPages.filter((p) => {

  if(p.id.startsWith(slug)) {
    if(p.id.split("/").length === 2 && p.id.includes("index")) {
      return;
    }

    if(p.id.split("/").length === 2 || p.id.includes("index")){
      return true;
    }
  }
})

---

<CardGrid stagger>
  { searchPages.map((p) => (
    <LinkCard href={'/'.concat(p.slug)} title={p.data.title} description={p.data.description}/>
  ))}
</CardGrid>
